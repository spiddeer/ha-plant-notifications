views:
  - title: Home
    sections:
      - type: grid
        cards:
          - type: heading
            heading: VÃ¤xterna
            heading_style: title
          - type: plant-status
            entity: plant.sovrum_plant_1
            name: KlÃ¤tterkallan
          - type: plant-status
            entity: plant.vardagsrum_plant_2
            name: Fredskallan
        column_span: 4
  - title: VÃ¤xter
    icon: mdi:flower
    type: sections
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-title-card
            title: ğŸŒ± Mina VÃ¤xter
            subtitle: Ã–vervakning och vattningsstatus
        column_span: 2
      - type: grid
        cards:
          - type: custom:mushroom-chips-card
            chips:
              - type: template
                icon: mdi:flower
                content: '2 vÃ¤xter'
                icon_color: green
              - type: template
                icon: mdi:water-alert
                content: >
                  {% set count = [
                    is_state('input_boolean.klatterkallan_behover_vatten', 'on'),
                    is_state('input_boolean.fredskallan_behover_vatten', 'on')
                  ] | select('equalto', true) | list | count %}
                  {{ count }} behÃ¶ver vatten
                icon_color: >
                  {% set count = [
                    is_state('input_boolean.klatterkallan_behover_vatten', 'on'),
                    is_state('input_boolean.fredskallan_behover_vatten', 'on')
                  ] | select('equalto', true) | list | count %}
                  {{ 'red' if count > 0 else 'green' }}
              - type: template
                icon: mdi:thermometer
                content: '{{ ((states("sensor.plant_temperature")|float(0) + states("sensor.plant_2_temperature")|float(0)) / 2) | round(1) }} Â°C'
                icon_color: blue
        column_span: 2
      - type: grid
        cards:
          - type: custom:stack-in-card
            mode: vertical
            cards:
              - type: custom:mushroom-template-card
                primary: >
                  {% if is_state('input_boolean.klatterkallan_behover_vatten', 'on') %}
                    ğŸ’§ KlÃ¤tterkallan - BehÃ¶ver vatten!
                  {% else %}
                    ğŸŒ¿ KlÃ¤tterkallan
                  {% endif %}
                secondary: >
                  {% set fukt = states('sensor.plant_soil_moisture')|int(0) %}
                  {% if fukt < 20 %}
                    ğŸ”´ Kritiskt torrt ({{ fukt }}%) Â· {{ states('sensor.plant_temperature') }}Â°C
                  {% elif fukt < 40 %}
                    ğŸŸ  Torrt ({{ fukt }}%) Â· {{ states('sensor.plant_temperature') }}Â°C
                  {% elif fukt < 60 %}
                    ğŸŸ¢ Lagom ({{ fukt }}%) Â· {{ states('sensor.plant_temperature') }}Â°C
                  {% else %}
                    ğŸ’¦ Fuktigt ({{ fukt }}%) Â· {{ states('sensor.plant_temperature') }}Â°C
                  {% endif %}
                tertiary: 'Senast vattnad: {{ states("input_datetime.plant1_last_watered") or "Aldrig" }}'
                icon: mdi:flower-tulip
                icon_color: >
                  {% if is_state('input_boolean.klatterkallan_behover_vatten', 'on') %}
                    red
                  {% elif states('sensor.plant_soil_moisture')|int(0) < 40 %}
                    orange
                  {% else %}
                    green
                  {% endif %}
                fill_container: false
                tap_action:
                  action: more-info
              - type: custom:apexcharts-card
                header:
                  show: false
                graph_span: 7d
                apex_config:
                  chart:
                    height: 140
                  yaxis:
                    - min: 0
                      max: 100
                series:
                  - entity: sensor.plant_soil_moisture
                    name: Fukt
                    type: area
                    stroke_width: 2
                    opacity: 0.3
                    color_threshold:
                      - value: 0
                        color: '#ff0000'
                      - value: 20
                        color: '#ff9800'
                      - value: 40
                        color: '#4caf50'
                      - value: 60
                        color: '#2196f3'
              - type: custom:mushroom-chips-card
                alignment: center
                chips:
                  - type: template
                    icon: mdi:water-percent
                    content: '{{ states(''sensor.plant_soil_moisture'') }}%'
                    icon_color: >
                      {% set fukt = states('sensor.plant_soil_moisture')|int(0) %}
                      {{ 'red' if fukt < 20 else 'orange' if fukt < 40 else 'green' }}
                  - type: template
                    icon: mdi:thermometer
                    content: '{{ states(''sensor.plant_temperature'') }}Â°C'
                    icon_color: blue
                  - type: template
                    icon: mdi:battery
                    content: '{{ states(''sensor.plant_battery'') }}%'
                    icon_color: >
                      {% set battery = states('sensor.plant_battery')|int(0) %}
                      {{ 'red' if battery < 20 else 'orange' if battery < 40 else 'green' }}
                  - type: action
                    icon: mdi:watering-can
                    icon_color: blue
                    tap_action:
                      action: call-service
                      service: script.plant1_mark_watered
            card_mod:
              style: |
                ha-card {
                  border-radius: 16px;
                  overflow: hidden;
                  {% if is_state('input_boolean.klatterkallan_behover_vatten', 'on') %}
                    background: linear-gradient(to right, rgba(255, 0, 0, 0.15) 0%, rgba(255, 0, 0, 0.05) 100%);
                    border-left: 6px solid #ff0000;
                    box-shadow: 0 4px 12px rgba(255, 0, 0, 0.2);
                  {% else %}
                    border-left: 6px solid #4caf50;
                    background: linear-gradient(to right, rgba(76, 175, 80, 0.08) 0%, rgba(76, 175, 80, 0.02) 100%);
                  {% endif %}
                  transition: all 0.3s ease;
                }
                ha-card:hover {
                  transform: translateY(-2px);
                  {% if is_state('input_boolean.klatterkallan_behover_vatten', 'on') %}
                    box-shadow: 0 6px 16px rgba(255, 0, 0, 0.3);
                  {% else %}
                    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
                  {% endif %}
                }
          - type: custom:stack-in-card
            mode: vertical
            cards:
              - type: custom:mushroom-template-card
                primary: >
                  {% if is_state('input_boolean.fredskallan_behover_vatten', 'on') %}
                    ğŸ’§ Fredskallan - BehÃ¶ver vatten!
                  {% else %}
                    ğŸŒ¿ Fredskallan
                  {% endif %}
                secondary: >
                  {% set fukt = states('sensor.plant_2_soil_moisture')|int(0) %}
                  {% if fukt < 30 %}
                    ğŸ”´ Kritiskt torrt ({{ fukt }}%) Â· {{ states('sensor.plant_2_temperature') }}Â°C
                  {% elif fukt < 50 %}
                    ğŸŸ  Torrt ({{ fukt }}%) Â· {{ states('sensor.plant_2_temperature') }}Â°C
                  {% elif fukt < 70 %}
                    ğŸŸ¢ Lagom ({{ fukt }}%) Â· {{ states('sensor.plant_2_temperature') }}Â°C
                  {% else %}
                    ğŸ’¦ Fuktigt ({{ fukt }}%) Â· {{ states('sensor.plant_2_temperature') }}Â°C
                  {% endif %}
                tertiary: 'Senast vattnad: {{ states("input_datetime.plant2_last_watered") or "Aldrig" }}'
                icon: mdi:flower-tulip-outline
                icon_color: >
                  {% if is_state('input_boolean.fredskallan_behover_vatten', 'on') %}
                    red
                  {% elif states('sensor.plant_2_soil_moisture')|int(0) < 50 %}
                    orange
                  {% else %}
                    green
                  {% endif %}
                fill_container: false
                tap_action:
                  action: more-info
              - type: custom:apexcharts-card
                header:
                  show: false
                graph_span: 7d
                apex_config:
                  chart:
                    height: 140
                  yaxis:
                    - min: 0
                      max: 100
                series:
                  - entity: sensor.plant_2_soil_moisture
                    name: Fukt
                    type: area
                    stroke_width: 2
                    opacity: 0.3
                    color_threshold:
                      - value: 0
                        color: '#ff0000'
                      - value: 20
                        color: '#ff9800'
                      - value: 40
                        color: '#4caf50'
                      - value: 60
                        color: '#2196f3'
              - type: custom:mushroom-chips-card
                alignment: center
                chips:
                  - type: template
                    icon: mdi:water-percent
                    content: '{{ states(''sensor.plant_2_soil_moisture'') }}%'
                    icon_color: >
                      {% set fukt = states('sensor.plant_2_soil_moisture')|int(0) %}
                      {{ 'red' if fukt < 30 else 'orange' if fukt < 50 else 'green' }}
                  - type: template
                    icon: mdi:thermometer
                    content: '{{ states(''sensor.plant_2_temperature'') }}Â°C'
                    icon_color: blue
                  - type: template
                    icon: mdi:battery
                    content: '{{ states(''sensor.plant_2_battery'') }}%'
                    icon_color: >
                      {% set battery = states('sensor.plant_2_battery')|int(0) %}
                      {{ 'red' if battery < 20 else 'orange' if battery < 40 else 'green' }}
                  - type: action
                    icon: mdi:watering-can
                    icon_color: blue
                    tap_action:
                      action: call-service
                      service: script.plant2_mark_watered
            card_mod:
              style: |
                ha-card {
                  border-radius: 16px;
                  overflow: hidden;
                  {% if is_state('input_boolean.fredskallan_behover_vatten', 'on') %}
                    background: linear-gradient(to right, rgba(255, 0, 0, 0.15) 0%, rgba(255, 0, 0, 0.05) 100%);
                    border-left: 6px solid #ff0000;
                    box-shadow: 0 4px 12px rgba(255, 0, 0, 0.2);
                  {% else %}
                    border-left: 6px solid #4caf50;
                    background: linear-gradient(to right, rgba(76, 175, 80, 0.08) 0%, rgba(76, 175, 80, 0.02) 100%);
                  {% endif %}
                  transition: all 0.3s ease;
                }
                ha-card:hover {
                  transform: translateY(-2px);
                  {% if is_state('input_boolean.fredskallan_behover_vatten', 'on') %}
                    box-shadow: 0 6px 16px rgba(255, 0, 0, 0.3);
                  {% else %}
                    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
                  {% endif %}
                }
        column_span: 2